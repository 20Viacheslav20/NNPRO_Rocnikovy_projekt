<!-- src/app/pages/tickets/ticket-detail/ticket-detail.component.html -->
<div class="ticket-detail container">
  <h2>Ticket detail</h2>

  <div class="d-flex align-items-center gap-3 mb-3">
    <mat-progress-spinner *ngIf="loading" mode="indeterminate" diameter="28"></mat-progress-spinner>
    <span *ngIf="error" class="text-danger">{{ error }}</span>
  </div>

  <ng-container *ngIf="ticket as t">
    <mat-card class="mb-3">
      <div class="row g-3">
        <div class="col-md-6">
          <strong>ID:</strong> <code>{{ t.id }}</code>
        </div>
        <div class="col-md-6 text-md-end">
          <strong>Created:</strong> {{ t.createdAt | date:'yyyy-MM-dd HH:mm' }}
        </div>

        <div class="col-md-6">
          <mat-form-field class="w-100" appearance="outline">
            <mat-label>Name</mat-label>
            <input matInput [(ngModel)]="t.name" />
          </mat-form-field>
        </div>

        <div class="col-md-3">
          <mat-form-field class="w-100" appearance="outline">
            <mat-label>Type</mat-label>
            <input matInput [value]="t.type" disabled />
          </mat-form-field>
        </div>

        <div class="col-md-3">
          <mat-form-field class="w-100" appearance="outline">
            <mat-label>Priority</mat-label>
            <input matInput [value]="t.priority" disabled />
          </mat-form-field>
        </div>

        <div class="col-md-4">
          <mat-form-field class="w-100" appearance="outline">
            <mat-label>State</mat-label>
            <mat-select [(ngModel)]="t.state">
              <mat-option *ngFor="let s of states" [value]="s">{{ s }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="col-md-12">
          <mat-form-field class="w-100" appearance="outline">
            <mat-label>Description</mat-label>
            <textarea matInput rows="4" [(ngModel)]="t.description"></textarea>
          </mat-form-field>
        </div>

        <div class="col-md-12 text-end">
          <button mat-flat-button color="primary" (click)="save()" [disabled]="loading">
            <mat-icon>save</mat-icon>
            Save
          </button>
        </div>
      </div>
    </mat-card>
  </ng-container>
</div>
